<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>fetch API</title>
  </head>
  <body>
    <script>
      /**
       * previously we used xmlHttprequest for AJAX calls and their is another way that is using fetch api.
       * ajax call is because we use some js code and send the request to the some remote server and once we get the data then we update it in required portion of the page.
       * fetch() is a method of window object that helps to make AJAX calls.
       * syntax: fetch(url, [options])
       * options like: optional parameters like method name[post,get...],headers,body etc
       * fetch() method returns a promise so to use the data from the server we have to use then() method of promise return by fetch() method.
       * ex: let promise = fetch("https://restcountries.com/v3.1/name/india");
             p.then((response) => {
             response.json().then((data) => {
             console.log(data);
             });
             });
       * */

      // GET request
      let p = fetch("https://restcountries.com/v3.1/name/india");
      p.then((response) => {
        response.json().then((data) => {
          console.log(data);
        });
      });
      p.catch((error) => {
        console.log("error: " + error);
      });

      // POST request
      // jsonplaceholder.typicode.com/guide

      fetch("https://jsonplaceholder.typicode.com/posts", {
        method: "POST",
        body: JSON.stringify({
          title: "foo",
          body: "bar",
          userId: 1,
        }),
        headers: { "Content-type": "application/json; charset=UTF-8" },
      })
        .then((response) => response.json())
        .then((json) => console.log(json))
        .catch((error) => console.log("error: " + error));
    </script>
  </body>
</html>
